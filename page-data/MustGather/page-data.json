{"componentChunkName":"component---src-pages-must-gather-md","path":"/MustGather/","result":{"pageContext":{"frontmatter":{"layout":"post","title":"Must Gather for the IBM FHIR Server","description":"Must Gather for the IBM FHIR Server","date":"2020-12-04T00:00:00.000Z","permalink":"/MustGather/"},"relativePagePath":"/MustGather.md","titleType":"append","MdxNode":{"id":"3b950a7b-2c11-514a-9d89-41a98edc9cf3","children":[],"parent":"b9ddfb36-cfbe-5ae5-b8ab-0890d81568d4","internal":{"content":"---\nlayout: post\ntitle: Must Gather for the IBM FHIR Server\ndescription: Must Gather for the IBM FHIR Server\ndate:   2020-12-04\npermalink: /MustGather/\n---\n\nThe IBM FHIR Server - Must-Gather Information\n\n1. Which environment did the problem occur in?\n    a. Kubernetes Version (IKS, ROKS)\n    b. If not one of the standard environments,\n        Please indicate the Operating System and java version in use\n        OS:  Windows/Linux/Mac\n        Java: (output of \"java -fullversion\")\n    c. The IBM FHIR Version\n    d. Docker Version\n\n2. Describe the problem as clearly as you can. Be sure to include:\n    a. Steps to reproduce the problem\n    b. The actual REST API URL strings (rather than placeholders copied from a test plan, etc.)\n        e.g. https://hostname/fhir-server/api/v4\n        Only provide as appropriate for sharing publically.\n\n    c. Full stacktraces (include all \"caused by\" clauses)\n    d. The error messages from liberty's messages.log file that are related to the problem\n    e. Contents of any applicable FHIR resources (avoid PHI)\n\n    Note: As part of an error response, the IBM FHIR Server typically returns\n    an OperationOutcome in the HTTP response, and the error message contains\n    a \"probeId=xxx\" value.   You can search for this probeId value within the messages.log\n    and/or trace.log to find the matching server-side messages related to the problem.\n\n3. If possible, please include a trace.log (or snippet) which shows the server activity when the problem occurred.\n    The liberty \"traceSpecification\" string should include `com.ibm.fhir.*=fine`\n\n# Gathering logs on Red Hat OpenShift\n\nTo help IBM Support troubleshoot any issues with your *IBM FHIR Server instance* on OpenShift, use the `oc adm must-gather` command to capture the must gather logs. The logs are stored in a folder in the current working directory.\n\nTo gather diagnostic logs, run the following commands as Cluster Administrator and replace `YOUR_NAMESPACE` with your namespace that the IBM FHIR Server and the IBM FHIR Server Schematool is running.\n\n1. Log in to your Red Hat OpenShift Container Platform as a cluster administrator by using the oc CLI.\n\n1. Provide the output of the OpenShift version.\n\n```\noc version > version.txt\n```\n\n1. Provide the output of the Kubectl version.\n\n```\nkubectl version >> version.txt\n```\n\n1. Collection information about the nodes.\n\n```\noc get nodes -o wide -n YOUR_NAMESPACE > nodes.txt\n```\n\n1. Collect information about the pod statuses\n\n```\noc get pods -n YOUR_NAMESPACE > pods.txt\n```\n\n1. Collect information about the pod containers\n\n```\noc get pods -o jsonpath=\"{..image}\"  -n YOUR_NAMESPACE > containerInfo.txt\n```\n\n1. Collect the defined secrets\n\n```\noc get secrets  -n YOUR_NAMESPACE > secrets.txt\n```\n\n1. Collect the defined persistent volume claims\n\n```\noc get pvc -n YOUR_NAMESPACE > pvcs.txt\n```\n\n1. Collect the description and log of any pod you are having issues with:\n\n```\noc describe pod YOUR_POD_NAME -n YOUR_NAMESPACE > describe-YOUR_POD_NAME.txt\noc logs YOUR_POD_NAME -n YOUR_NAMESPACE > log-YOUR_POD_NAME.log\n```\n\n1. The oc adm must-gather CLI command collects the information from your cluster that is most likely needed for debugging issues, such as:\n\n```\noc adm must-gather\n```\n\n1. To obtain your cluster ID using the OpenShift CLI (oc), run the following command:\n\n```\noc get clusterversion -o jsonpath='{.items[].spec.clusterID}{\"\\n\"}'\n```\n\n1. Provide the Custom Resource(CR) .yaml file used by the operator to configure the environment\n\n```\nkubectl get YOUR_CONFIG -o yaml > config.yaml\n```\n\n1. Obtain detailed description of a pod\n\n```\noc describe pod -n YOUR_NAMESPACE POD_NAME &> POD_NAME_describe.log\n```\n\n1. Run the oc adm inspect\n\n```\noc adm inspect\n```\n\nExecuting commands/bash shell inside a pod:\n\n```\noc exec [flags] -n YOUR_NAMESPACE POD [-c CONTAINER] -- COMMAND [args...]\n```\n\nExample: to run a bash shell within the pod and tail the liberty messages.log:\n\n```\n     oc exec -ti  ibmfhirserver-as6jql -- /bin/bash \n     bash-4.2$ tail -f /logs/messages.log \n```\n\nProvide the data to your support team. Note, please review and redact any sensistive data before posting in any issue.","type":"Mdx","contentDigest":"aac8a7cf76c21e251817339ac763b091","counter":103,"owner":"gatsby-plugin-mdx","fieldOwners":{"slug":"gatsby-plugin-slug"}},"frontmatter":{"title":"Must Gather for the IBM FHIR Server","layout":"post","description":"Must Gather for the IBM FHIR Server","date":"2020-12-04T00:00:00.000Z","permalink":"/MustGather/"},"exports":{},"rawBody":"---\nlayout: post\ntitle: Must Gather for the IBM FHIR Server\ndescription: Must Gather for the IBM FHIR Server\ndate:   2020-12-04\npermalink: /MustGather/\n---\n\nThe IBM FHIR Server - Must-Gather Information\n\n1. Which environment did the problem occur in?\n    a. Kubernetes Version (IKS, ROKS)\n    b. If not one of the standard environments,\n        Please indicate the Operating System and java version in use\n        OS:  Windows/Linux/Mac\n        Java: (output of \"java -fullversion\")\n    c. The IBM FHIR Version\n    d. Docker Version\n\n2. Describe the problem as clearly as you can. Be sure to include:\n    a. Steps to reproduce the problem\n    b. The actual REST API URL strings (rather than placeholders copied from a test plan, etc.)\n        e.g. https://hostname/fhir-server/api/v4\n        Only provide as appropriate for sharing publically.\n\n    c. Full stacktraces (include all \"caused by\" clauses)\n    d. The error messages from liberty's messages.log file that are related to the problem\n    e. Contents of any applicable FHIR resources (avoid PHI)\n\n    Note: As part of an error response, the IBM FHIR Server typically returns\n    an OperationOutcome in the HTTP response, and the error message contains\n    a \"probeId=xxx\" value.   You can search for this probeId value within the messages.log\n    and/or trace.log to find the matching server-side messages related to the problem.\n\n3. If possible, please include a trace.log (or snippet) which shows the server activity when the problem occurred.\n    The liberty \"traceSpecification\" string should include `com.ibm.fhir.*=fine`\n\n# Gathering logs on Red Hat OpenShift\n\nTo help IBM Support troubleshoot any issues with your *IBM FHIR Server instance* on OpenShift, use the `oc adm must-gather` command to capture the must gather logs. The logs are stored in a folder in the current working directory.\n\nTo gather diagnostic logs, run the following commands as Cluster Administrator and replace `YOUR_NAMESPACE` with your namespace that the IBM FHIR Server and the IBM FHIR Server Schematool is running.\n\n1. Log in to your Red Hat OpenShift Container Platform as a cluster administrator by using the oc CLI.\n\n1. Provide the output of the OpenShift version.\n\n```\noc version > version.txt\n```\n\n1. Provide the output of the Kubectl version.\n\n```\nkubectl version >> version.txt\n```\n\n1. Collection information about the nodes.\n\n```\noc get nodes -o wide -n YOUR_NAMESPACE > nodes.txt\n```\n\n1. Collect information about the pod statuses\n\n```\noc get pods -n YOUR_NAMESPACE > pods.txt\n```\n\n1. Collect information about the pod containers\n\n```\noc get pods -o jsonpath=\"{..image}\"  -n YOUR_NAMESPACE > containerInfo.txt\n```\n\n1. Collect the defined secrets\n\n```\noc get secrets  -n YOUR_NAMESPACE > secrets.txt\n```\n\n1. Collect the defined persistent volume claims\n\n```\noc get pvc -n YOUR_NAMESPACE > pvcs.txt\n```\n\n1. Collect the description and log of any pod you are having issues with:\n\n```\noc describe pod YOUR_POD_NAME -n YOUR_NAMESPACE > describe-YOUR_POD_NAME.txt\noc logs YOUR_POD_NAME -n YOUR_NAMESPACE > log-YOUR_POD_NAME.log\n```\n\n1. The oc adm must-gather CLI command collects the information from your cluster that is most likely needed for debugging issues, such as:\n\n```\noc adm must-gather\n```\n\n1. To obtain your cluster ID using the OpenShift CLI (oc), run the following command:\n\n```\noc get clusterversion -o jsonpath='{.items[].spec.clusterID}{\"\\n\"}'\n```\n\n1. Provide the Custom Resource(CR) .yaml file used by the operator to configure the environment\n\n```\nkubectl get YOUR_CONFIG -o yaml > config.yaml\n```\n\n1. Obtain detailed description of a pod\n\n```\noc describe pod -n YOUR_NAMESPACE POD_NAME &> POD_NAME_describe.log\n```\n\n1. Run the oc adm inspect\n\n```\noc adm inspect\n```\n\nExecuting commands/bash shell inside a pod:\n\n```\noc exec [flags] -n YOUR_NAMESPACE POD [-c CONTAINER] -- COMMAND [args...]\n```\n\nExample: to run a bash shell within the pod and tail the liberty messages.log:\n\n```\n     oc exec -ti  ibmfhirserver-as6jql -- /bin/bash \n     bash-4.2$ tail -f /logs/messages.log \n```\n\nProvide the data to your support team. Note, please review and redact any sensistive data before posting in any issue.","fileAbsolutePath":"/home/runner/work/FHIR/FHIR/fhir/docs/src/pages/MustGather.md","fields":{"slug":"/MustGather"}}}},"staticQueryHashes":["1364590287","2102389209","2102389209","227138135","227138135","2456312558","2746626797","2746626797","3018647132","3018647132","3906363820","3906363820","768070550"]}